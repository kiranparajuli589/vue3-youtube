import{r as f,w as y,h as he,o as me,c as Ve}from"./index-52651c58.js";const be=["id"],Pe={__name:"VueYtframe",props:{videoId:{type:String,required:!1,default:null},videoUrl:{type:String,required:!1,default:null},width:{type:[Number,String],required:!1,default:"100%"},height:{type:[Number,String],required:!1,default:"100%"},playerVars:{type:Object,required:!1,default:()=>({})}},emits:["ready","playing","paused","ended","stateChange","playbackQualityChange","playbackRateChange","error","apiChange"],setup(S,{expose:I,emit:C}){const t=f(null),u=f(!1),n=S;y([()=>n.width,()=>n.height],([e,a])=>{t.value&&v(e,a)}),y(()=>n.videoId,e=>{b(()=>{k(e)},300)()});function k(e){var a;l(),u.value&&(t.value?((a=n.playerVars)==null?void 0:a.autoplay)===1?g({videoId:e,startSeconds:n.playerVars.start||0,endSeconds:n.playerVars.end||0}):h({videoId:e,startSeconds:n.playerVars.start||0,endSeconds:n.playerVars.end||0}):d())}y(()=>n.videoUrl,e=>{b(()=>{U(e)},500)()});function U(e){var a;l(),u.value&&(t.value?(a=n.playerVars)!=null&&a.autoplay?m({mediaContentUrl:e,startSeconds:n.playerVars.start||0,endSeconds:n.playerVars.end||0}):V({mediaContentUrl:e,startSeconds:n.playerVars.start||0,endSeconds:n.playerVars.end||0}):d())}function l(){const e=n.videoId,a=n.videoUrl;if(!e&&!a){u.value=!1,console.error("At least one of the props 'videoId' or 'videoUrl' must be provided.");return}if(!e&&a&&!c(a)){console.error(`The provided video URL (${a}) is not a valid Youtube URL.`,"If you are sure it is a valid YouTube URL and you are still getting this error,","please open an issue on GitHub at https://github.com/kiranparajuli589/vue3-ytframe/issues/new"),u.value=!1;return}u.value=!0}const s=f(null);he(async()=>{s.value=Math.random().toString(36).substring(2,12),l(n.videoId,n.videoUrl),T().then(()=>{p().then(()=>{u.value&&d()})})});function T(){if(document.querySelector("script[src='https://www.youtube.com/iframe_api']"))return Promise.resolve();const e=document.createElement("script");return e.src="https://www.youtube.com/iframe_api",document.head.appendChild(e),console.info("Youtube API script added to the HTML document."),Promise.resolve()}function p(){return window.YT&&window.YT.Player?Promise.resolve():new Promise(e=>{setTimeout(()=>{p().then(()=>{e()})},100)})}const r=C;function d(){const e=document.getElementById(s.value),a=n.videoId||c(n.videoUrl);t.value=new YT.Player(e,{height:n.height,width:n.width,videoId:a,playerVars:n.playerVars,events:{onReady:R,onStateChange:A,onPlaybackQualityChange:Y,onPlaybackRateChange:x,onError:B,onApiChange:E}})}function R(e){r("ready",e.target)}function A(e){switch(e.data){case window.YT.PlayerState.PLAYING:r("playing",e.target);break;case window.YT.PlayerState.PAUSED:r("paused",e.target);break;case window.YT.PlayerState.ENDED:r("ended",e.target);break}r("stateChange",e.target)}function Y(e){r("playbackQualityChange",e.target)}function x(e){r("playbackRateChange",e.target)}function B(e){r("error",e.target)}function E(e){r("apiChange",e.target)}function L(){t.value.playVideo()}function _(){t.value.pauseVideo()}function M(){t.value.stopVideo()}function O(e,a){t.value.seekTo(e,a)}function q(){t.value.nextVideo()}function D(){t.value.previousVideo()}function N(e){t.value.playVideoAt(e)}function Q(){t.value.mute()}function z(){t.value.unMute()}function F(){return t.value.isMuted()}function j(e){t.value.setVolume(e)}function G(){return t.value.getVolume()}function v(e,a){t.value.setSize(e,a)}function H(e){t.value.setLoop(e)}function $(e){t.value.setShuffle(e)}function Z(){return t.value.getDuration()}function J(){return t.value.getCurrentTime()}function K(){return t.value.getVideoEmbedCode()}function W(){return t.value.getVideoUrl()}function X(){return t.value.getVideoLoadedFraction()}function ee(){return t.value.getPlayerState()}function te(){return t.value.getPlaybackRate()}function ae(e){t.value.setPlaybackRate(e)}function ne(){return t.value.getAvailablePlaybackRates()}function oe(){return t.value.getOptions()}function re(e,a){return t.value.getOption(e,a)}function ue(e,a,o){t.value.setOption(e,a,o)}function ie(){return t.value.getSphericalProperties()}function le(e){t.value.setSphericalProperties(e)}function se(){return t.value.getPlaylist()}function de(){return t.value.getPlaylistIndex()}function ce(){return t.value.getIframe()}function fe(){t.value.destroy(),t.value=null}function g({videoId:e,startSeconds:a,endSeconds:o}={}){t.value.loadVideoById({videoId:e,startSeconds:a,endSeconds:o})}function h({videoId:e,startSeconds:a,endSeconds:o}={}){t.value.cueVideoById({videoId:e,startSeconds:a,endSeconds:o})}function m({mediaContentUrl:e,startSeconds:a,endSeconds:o}={}){t.value.loadVideoByUrl({mediaContentUrl:e,startSeconds:a,endSeconds:o})}function V({mediaContentUrl:e,startSeconds:a,endSeconds:o}={}){t.value.cueVideoByUrl({mediaContentUrl:e,startSeconds:a,endSeconds:o})}function ye(e,a,o){t.value.cuePlaylist(e,a,o)}function pe(e,a,o){t.value.loadPlaylist(e,a,o)}function c(e){const a=/^https:\/\/(?:(?:www|m)\.)?(?:youtube\.com\/watch\?v=|youtu.be\/|youtube\.com\/embed\/)(?<id>[a-zA-Z0-9_-]+)(?:&.*)$/gm;a.lastIndex=0;const o=a.exec(e);return o?o.groups.id:null}function b(e,a,o){var i;return function(){var P=this,w=arguments,ve=function(){i=null,o||e.apply(P,w)},ge=o&&!i;clearTimeout(i),i=setTimeout(ve,a),ge&&e.apply(P,w)}}return I({player:t,playVideo:L,pauseVideo:_,stopVideo:M,seekTo:O,nextVideo:q,previousVideo:D,playVideoAt:N,mute:Q,unMute:z,isMuted:F,setVolume:j,getVolume:G,setSize:v,setShuffle:$,setLoop:H,getDuration:Z,getCurrentTime:J,getVideoEmbedCode:K,getVideoUrl:W,getVideoLoadedFraction:X,getPlayerState:ee,getPlaybackRate:te,setPlaybackRate:ae,getAvailablePlaybackRates:ne,getOptions:oe,getAnOption:re,setAnOption:ue,getSphericalProperties:ie,setSphericalProperties:le,getPlaylist:se,getPlaylistIndex:de,getIframe:ce,destroy:fe,loadVideoById:g,cueVideoById:h,loadVideoByUrl:m,cueVideoByUrl:V,cuePlaylist:ye,loadPlaylist:pe,getVideoIdFromYoutubeURL:c}),(e,a)=>(me(),Ve("div",{ref:"youtube",id:s.value},null,8,be))}},Se=Pe;export{Se as V};
